<view><block wx:if="{{business.id}}"><view style="padding:20rpx 20rpx 0 20rpx;"><view class="box" style="display:flex;align-items:center;margin-bottom:20rpx;"><view style="flex:1;"><view style="display:flex;align-items:baseline;"><text style="font-size:40rpx;">{{business.name}}</text><view><block wx:if="{{business.isCollect}}"><uni-icons style="margin-left:20rpx;" vue-id="3db16520-1" size="18" color="orange" type="star-filled" data-event-opts="{{[['^click',[['collect']]]]}}" bind:click="__e" bind:__l="__l"></uni-icons></block><block wx:else><uni-icons style="margin-left:20rpx;" vue-id="3db16520-2" size="18" type="star" data-event-opts="{{[['^click',[['collect']]]]}}" bind:click="__e" bind:__l="__l"></uni-icons></block></view></view><view style="font-size:24rpx;margin:10rpx 0;color:#666;"><text style="margin-right:10rpx;padding-right:10rpx;border-right:2rpx solid #ccc;">平台配送</text><text style="margin-right:10rpx;padding-right:10rpx;border-right:2rpx solid #ccc;">免配送费</text><text>30分钟内送达</text></view><view style="font-size:24rpx;color:#666;margin:10rpx 0;">{{'地址：'+business.address+''}}</view><view style="font-size:24rpx;color:#666;">{{'联系电话：'+business.phone+''}}</view></view><view style="width:160rpx;height:160rpx;"><image style="width:100%;border-radius:50%;" mode="widthFix" src="{{business.avatar}}"></image></view></view><view style="margin-bottom:10rpx;display:flex;background-color:#fff;"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="{{[(currentView===0)?'view-active':'']}}" style="padding:15rpx;border-radius:10rpx 0 0 10rpx;" bindtap="__e">全部商品</view><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="{{[(currentView===1)?'view-active':'']}}" style="padding:15rpx 30rpx;border-radius:0 10rpx 10rpx 0;" bindtap="__e">评价</view></view><block wx:if="{{currentView===0}}"><view style="background-color:#fff;"><view style="display:flex;"><view style="width:240rpx;flex-direction:column;"><block wx:for="{{categoryList}}" wx:for-item="item" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['loadGoods',['$0'],[[['categoryList','id',item.id,'id']]]]]]]}}" class="{{['nav-item',(item.id===currentCategoryId)?'active':'']}}" bindtap="__e">{{item.name+''}}</view></block></view><scroll-view style="height:calc(100vh - 508rpx);" scroll-y="true"><view style="flex:1;padding:20px;"><block wx:for="{{goodsList}}" wx:for-item="item" wx:for-index="__i1__" wx:key="id"><view style="display:flex;margin-bottom:20px;"><view style="width:160rpx;height:160rpx;"><image style="width:100%;height:100%;border-radius:10rpx;" src="{{item.img}}" mode="scaleToFill"></image></view><view style="flex:1;display:flex;flex-direction:column;margin-left:20rpx;"><view style="font-size:28rpx;font-weight:bold;margin-bottom:10rpx;">{{item.name}}</view><view style="color:#999;font-size:24rpx;margin-bottom:5rpx;">{{item.descr}}</view><view style="margin-bottom:5rpx;"><block wx:if="{{item.discount!==1.0}}"><text class="mini-btn" style="color:orangered;border-color:orangered;font-size:20rpx;margin-right:10rpx;">{{item.discount*10+"折"}}</text></block><text style="color:#999;font-size:24rpx;">{{"已售"+item.saleCount}}</text></view><view style="margin-bottom:10rpx;font-size:24rpx;font-weight:bold;"><block wx:if="{{item.discount!==1.0}}"><text style="color:#333;text-decoration:line-through;margin-right:10rpx;">{{"￥"+item.price}}</text></block><text style="color:red;margin-right:5rpx;">{{"￥"+item.actualPrice}}</text><text class="mini-btn" style="color:orangered;border-color:orangered;font-size:20rpx;">到手价</text></view><view><text data-event-opts="{{[['tap',[['buy',['$0'],[[['goodsList','id',item.id]]]]]]]}}" style="padding:0 10rpx;background-color:orange;font-size:24rpx;color:#fff;border-radius:4rpx;" bindtap="__e">选购</text></view></view></view></block></view></scroll-view></view></view></block><block wx:if="{{currentView===1}}"><view class="box"><scroll-view style="height:calc(100vh - 448rpx);" scroll-y="true"><block wx:for="{{comments}}" wx:for-item="item" wx:for-index="__i2__" wx:key="id"><view style="display:flex;border-bottom:1rpx solid #eee;padding:20rpx 0;"><view style="width:100rpx;height:100rpx;margin-right:30rpx;"><image style="width:100%;height:100%;border-radius:50%;" src="{{item.user.avatar}}"></image></view><view style="flex:1;display:flex;flex-direction:column;justify-content:space-between;"><view style="margin-bottom:10rpx;">{{item.content}}</view><view style="display:flex;align-items:center;justify-content:space-between;"><view style="flex:1;"><uni-rate vue-id="{{'3db16520-3-'+__i2__}}" readonly="{{true}}" size="14" max="{{5}}" value="{{item.star}}" bind:__l="__l"></uni-rate></view><view style="color:#999;">{{item.time}}</view></view></view></view></block></scroll-view></view></block></view></block><block wx:if="{{business.id}}"><view class="goods-carts"><uni-goods-nav vue-id="3db16520-4" options="{{options}}" fill="{{true}}" button-group="{{buttonGroup}}" data-event-opts="{{[['^click',[['onClick']]],['^buttonClick',[['addOrder']]]]}}" bind:click="__e" bind:buttonClick="__e" bind:__l="__l"></uni-goods-nav></view></block><uni-popup class="vue-ref" vue-id="3db16520-5" type="bottom" background-color="#fff" data-ref="popup" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view style="max-height:70vh;" scroll-y="true"><view style="padding:40rpx 40rpx 280rpx 40rpx;"><view style="text-align:right;margin-bottom:10rpx;color:#999;"><uni-icons style="position:relative;top:4rpx;" vue-id="{{('3db16520-6')+','+('3db16520-5')}}" type="trash" size="16" color="#999" data-event-opts="{{[['^click',[['deleteAll']]]]}}" bind:click="__e" bind:__l="__l"></uni-icons>清空</view><block wx:for="{{cart}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{item.goods}}"><view style="display:flex;margin-bottom:20rpx;"><view style="width:100rpx;height:100rpx;"><image style="width:100%;height:100%;display:inline-block;" src="{{item.goods.img}}"></image></view><view style="flex:1;margin-left:20rpx;display:flex;flex-direction:column;justify-content:space-around;"><view style="flex:1;">{{item.goods.name}}</view><view style="flex:1;color:red;display:flex;align-items:flex-end;"><view style="flex:1;">{{"￥"+item.goods.actualPrice}}</view><view style="flex:1;display:flex;justify-content:right;"><uni-number-box vue-id="{{('3db16520-7-'+index)+','+('3db16520-5')}}" min="{{1}}" value="{{item.num}}" data-event-opts="{{[['^change',[['updateCart',['$0'],[[['cart','',index]]]]]],['^input',[['__set_model',['$0','num','$event',[]],[[['cart','',index]]]]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></uni-number-box></view></view></view></view></block></block><block wx:if="{{amount.actual}}"><view style="margin-top:40rpx;text-align:right;">总金额：<text style="color:red;">{{"￥"+amount.actual}}</text></view></block></view></scroll-view></uni-popup></view>