(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-confirm-confirm"],{"12ba":function(t,e,i){"use strict";i.r(e);var n=i("1dd6"),s=i("54d7");for(var r in s)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(r);var o=i("f0c5"),a=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"7fb6bb5d",null,!1,n["a"],void 0);e["default"]=a.exports},"1dd6":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={uniIcons:i("5910").default,uniDataCheckbox:i("e7ea").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticStyle:{padding:"20rpx","padding-bottom":"120rpx"}},[i("v-uni-view",{staticClass:"box",staticStyle:{"background-color":"#fff3e2",color:"orange",padding:"10rpx 20rpx","margin-bottom":"20rpx"}},[i("uni-icons",{staticStyle:{position:"relative",top:"3rpx"},attrs:{type:"sound",color:"orange"}}),i("v-uni-text",{staticStyle:{"margin-left":"5rpx"}},[t._v("温馨提示: 请适量点餐, 避免浪费")])],1),t.address.id?i("v-uni-view",{staticClass:"box",staticStyle:{"margin-bottom":"20rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goAddress()}}},[i("v-uni-view",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"20rpx"}},[i("v-uni-view",{staticStyle:{flex:"1"}},[i("v-uni-view",{staticStyle:{"font-weight":"bold",flex:"1","font-size":"32rpx"}},[t._v(t._s(t.address.address))]),i("v-uni-view",{staticStyle:{color:"#999",margin:"10rpx 0","font-size":"24rpx"}},[i("v-uni-text",{staticStyle:{"margin-right":"10rpx"}},[t._v(t._s(t.address.user))]),i("v-uni-text",[t._v(t._s(t.address.phone))])],1)],1),i("v-uni-view",[i("uni-icons",{staticStyle:{width:"100rpx"},attrs:{type:"forward",color:"#999"}})],1)],1),i("v-uni-view",{staticStyle:{display:"flex","align-items":"center","font-size":"24rpx"}},[i("v-uni-view",{staticStyle:{flex:"1","font-weight":"bold"}},[t._v("平台配送")]),i("v-uni-view",{staticStyle:{color:"#009eff"}},[t._v("预计30分钟内送达")])],1)],1):i("v-uni-view",{staticClass:"box",staticStyle:{"font-size":"24rpx",color:"#009eff","margin-bottom":"20rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goAddress()}}},[i("uni-icons",{staticStyle:{position:"relative",top:"4rpx"},attrs:{type:"plus",color:"#009eff"}}),i("v-uni-text",[t._v("添加收货地址")])],1),i("v-uni-view",{staticClass:"box",staticStyle:{"margin-bottom":"20rpx"}},[i("v-uni-view",{staticStyle:{color:"#666","margin-bottom":"20rpx","font-size":"32rpx"}},[t._v(t._s(t.business.name))]),i("v-uni-view",{staticStyle:{"margin-bottom":"20rpx"}},t._l(t.cart,(function(e){return e.goods?i("v-uni-view",{key:e.id,staticStyle:{display:"flex","margin-bottom":"20rpx",padding:"0 20rpx"}},[i("v-uni-view",{staticStyle:{width:"100rpx",height:"100rpx"}},[i("v-uni-image",{staticStyle:{width:"100%",height:"100%",display:"block"},attrs:{src:e.goods.img}})],1),i("v-uni-view",{staticStyle:{flex:"1","margin-left":"20rpx",display:"flex","flex-direction":"column","justify-content":"space-between"}},[i("v-uni-view",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.goods.name))]),i("v-uni-view",{staticStyle:{color:"#999","font-size":"24rpx"}},[t._v("x "+t._s(e.num))])],1),i("v-uni-view",{staticStyle:{color:"red"}},[t._v("￥"+t._s(Math.floor(e.goods.actualPrice*e.num*100)/100))])],1):t._e()})),1),i("v-uni-view",{staticStyle:{"text-align":"right","font-size":"24rpx"}},[t.amount.discount?i("v-uni-text",{staticStyle:{"margin-right":"10rpx"}},[t._v("已优惠"),i("v-uni-text",{staticStyle:{color:"red"}},[t._v("￥"+t._s(t.amount.discount))])],1):t._e(),i("v-uni-text",[t._v("小计￥"),i("v-uni-text",{staticStyle:{color:"red","font-weight":"bold","font-size":"36rpx"}},[t._v(t._s(t.amount.actual))])],1)],1)],1),i("v-uni-view",{staticClass:"box",staticStyle:{"margin-bottom":"20rpx"}},[i("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"20rpx"}},[i("v-uni-view",{staticStyle:{"font-weight":"bold"}},[t._v("商家承诺")]),i("v-uni-view",[t._v("售后无忧 · 食无忧")])],1),i("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"20rpx"}},[i("v-uni-view",{staticStyle:{"font-weight":"bold"}},[t._v("隐私保护")]),i("v-uni-view",[t._v("号码保护 · 隐私无忧")])],1),i("v-uni-view",{staticStyle:{display:"flex","justify-content":"space-between","margin-bottom":"20rpx"}},[i("v-uni-view",{staticStyle:{"font-weight":"bold"}},[t._v("备注")]),i("v-uni-view",{staticStyle:{color:"#999"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goOrderComment.apply(void 0,arguments)}}},[t.orders.comment?i("v-uni-text",[t._v(t._s(t.orders.comment))]):i("v-uni-text",[t._v("填写口味偏好")]),i("uni-icons",{attrs:{size:"12",type:"forward",color:"#999"}})],1)],1)],1),i("v-uni-view",{staticClass:"box"},[i("v-uni-view",[i("uni-data-checkbox",{attrs:{localdata:t.payTypes},model:{value:t.orders.payType,callback:function(e){t.$set(t.orders,"payType",e)},expression:"orders.payType"}})],1)],1)],1),i("v-uni-view",{staticStyle:{width:"100vw","box-shadow":"0 0 10px rgba(0, 0, 0, .1)","background-color":"#fff",position:"fixed",bottom:"0"}},[i("v-uni-view",{staticStyle:{display:"flex","align-items":"flex-end",padding:"20rpx"}},[i("v-uni-view",{staticStyle:{flex:"1","padding-right":"20rpx","text-align":"right"}},[t._v("已优惠 ￥"),i("v-uni-text",{staticStyle:{color:"red","margin-right":"20rpx"}},[t._v(t._s(t.amount.discount))]),t._v("小计￥"),i("v-uni-text",{staticStyle:{color:"red","font-weight":"bold","font-size":"36rpx"}},[t._v(t._s(t.amount.actual))])],1),i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addOrder()}}},[t._v("提交订单")])],1)],1)],1)},r=[]},4362:function(t,e,i){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,n="/";e.cwd=function(){return n},e.chdir=function(e){t||(t=i("df7c")),n=t.resolve(e,n)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"54d7":function(t,e,i){"use strict";i.r(e);var n=i("e523"),s=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=s.a},df7c:function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var s=t[n];"."===s?t.splice(n,1):".."===s?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}e.resolve=function(){for(var e="",s=!1,r=arguments.length-1;r>=-1&&!s;r--){var o=r>=0?arguments[r]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,s="/"===o.charAt(0))}return e=i(n(e.split("/"),(function(t){return!!t})),!s).join("/"),(s?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),o="/"===s(t,-1);return t=i(n(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&o&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var i=t.length-1;i>=0;i--)if(""!==t[i])break;return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var s=n(t.split("/")),r=n(i.split("/")),o=Math.min(s.length,r.length),a=o,u=0;u<o;u++)if(s[u]!==r[u]){a=u;break}var d=[];for(u=a;u<s.length;u++)d.push("..");return d=d.concat(r.slice(a)),d.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),i=47===e,n=-1,s=!0,r=t.length-1;r>=1;--r)if(e=t.charCodeAt(r),47===e){if(!s){n=r;break}}else s=!1;return-1===n?i?"/":".":i&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var i=function(t){"string"!==typeof t&&(t+="");var e,i=0,n=-1,s=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!s){i=e+1;break}}else-1===n&&(s=!1,n=e+1);return-1===n?"":t.slice(i,n)}(t);return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,i=0,n=-1,s=!0,r=0,o=t.length-1;o>=0;--o){var a=t.charCodeAt(o);if(47!==a)-1===n&&(s=!1,n=o+1),46===a?-1===e?e=o:1!==r&&(r=1):-1!==e&&(r=-1);else if(!s){i=o+1;break}}return-1===e||-1===n||0===r||1===r&&e===n-1&&e===i+1?"":t.slice(e,n)};var s="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i("4362"))},e523:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("7db0"),i("d3b7");i("4362");var n={data:function(){return{businessId:0,addressId:0,business:{},address:{},cart:[],amount:{},orders:{comment:"",payType:"支付宝"},payTypes:[{text:"支付宝",value:"支付宝"},{text:"微信支付",value:"微信支付"}],user:uni.getStorageSync("xm-user")}},onShow:function(){var t=getCurrentPages(),e=t.length-1,i=t[e].options;console.log(i),this.businessId=i.businessId||0,this.addressId=i.addressId||0,this.orders.comment=i.comment||"",this.loadAddress(),this.loadBusiness(),this.loadCart()},methods:{goOrderComment:function(){uni.navigateTo({url:"/pages/orderComment/orderComment?businessId="+this.businessId+"&addressId="+this.addressId+"&comment="+this.orders.comment})},addOrder:function(){this.address.id?this.cart.length?(this.orders.user=this.address.user,this.orders.phone=this.address.phone,this.orders.address=this.address.address,this.orders.cartList=this.cart,this.$request.post("/orders/addOrder",this.orders).then((function(t){"200"===t.code?(uni.showToast({title:"下单成功"}),setTimeout((function(){var e;uni.navigateTo({url:"/pages/orderItems/orderItems?orderId="+(null===(e=t.data)||void 0===e?void 0:e.id)})}),1e3)):uni.showToast({icon:"none",title:t.msg})}))):uni.showToast({icon:"none",title:"请添加餐品"}):uni.showToast({icon:"none",title:"请添加收货地址"})},loadCart:function(){var t=this;this.$request.get("/cart/selectAll",{businessId:this.businessId,userId:this.user.id}).then((function(e){t.cart=e.data||[],t.$request.post("/cart/calc",t.cart).then((function(e){t.amount=e.data}))}))},loadBusiness:function(){var t=this;this.$request.get("/business/selectById/"+this.businessId).then((function(e){t.business=e.data||{}}))},goAddress:function(){uni.navigateTo({url:"/pages/address/address?businessId="+this.businessId+"&addressId="+this.addressId+"&comment="+this.orders.comment})},loadAddress:function(){var t=this;this.$request.get("/address/selectAll",{userId:this.user.id}).then((function(e){var i;null!==(i=e.data)&&void 0!==i&&i.length&&(t.addressId?t.address=e.data.find((function(e){return e.id==t.addressId})):(t.address=e.data[0],t.addressId=t.address.id))}))}}};e.default=n}}]);